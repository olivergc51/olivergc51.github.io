<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>T7 · v3 — Sol + Luna + Cielos adelantados</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
  </head>
  <body>
  <script>
  // Sol y su cielo
  let x_s, y_s, v_s, d_s, r_s;
  let x_cs;           // x del rectángulo "cielo del sol"
  let adelanto_s;     // cuánto va por delante el cielo del sol

  // Luna y su cielo
  let x_l, y_l, v_l, d_l, r_l;
  let x_cl;           // x del rectángulo "cielo de la luna"
  let adelanto_l;     // cuánto va por delante el cielo de la luna

 //globo
  let xG, xY, Sg, vyG, cuerda;

 //árbol
  let S, troncoW, troncoH, copaD;
  
 //coche sencillo
  let xC, L, vxC, H, wheelD
  function setup() {
    createCanvas(600, 600);

    // Tamaños relativos (diámetros)
    d_s = width * 0.15;   r_s = d_s * 0.5;
    d_l = height * 0.30;  r_l = d_l * 0.5;
    Sg = 0.08*height; 
    cuerda = 1.2*Sg
      
    // Posiciones iniciales de astros
    x_s = -r_s;            
    y_s = height * 0.35;
    x_l = -width - r_l;    
    y_l = height * 0.55;
    xG = width / 2 ;     
    yG = height+50;
    // Velocidades
    v_s = width / 800;
    v_l = v_s;
    vyG = height / 100;
    // Adelantos (por delante del astro)
    adelanto_s = width * 0.10; // 10% del ancho
    adelanto_l = width * 0.10;
   
    // Prametros del árbol
    S = 0.1*height
    troncoW = 0.3*S
    troncoH = 1.2*S
    copaD = 1.3*S
	
	//Parametros del coche
        L = 0.12*height
	H = 0.4*L
	wheelD = 0.25*L
	xC= width/4
	vxC= width/100
	
	
    // Posiciones iniciales de los cielos (ligeramente por delante)
    x_cs = x_s + adelanto_s;
    x_cl = x_l + adelanto_l;
  }

  function draw() {
    // Fondo base
    background(20, 20, 30);
    noStroke();

    // Cielo del sol (azulado) — se pinta primero
    fill(0, 0, 200);
    rect(x_cs, 0, width, height * 0.8);

    // Cielo de la luna (gris)
    fill(200);
    rect(x_cl, 0, width, height * 0.8);

    // Suelo
    fill(20, 120, 40);
    rect(0, height * 0.8, width, height * 0.2);

    // Sol
    fill(255, 210, 0);
    circle(x_s, y_s, d_s);

    // Luna
    fill(255);
    circle(x_l, y_l - height*0.4, d_l);

    // Dibujo del globo (operando dentro)
    fill(255, 80, 80);
    stroke(10);
	rect(xG, yG, width/30, height/10);
    triangle(xG-width/80, yG, xG+width/50, yG-height/50, xG+width/20, yG); 
    stroke(60); 
    line(xG, yG + 0.5*Sg, xG, yG + 0.5*Sg + cuerda*1.3); 
    
	// Dubujo árbol
	
	S = S + 0.00008*height;
	fill(120, 80, 40);
	rect(0.15*width - 0.5*troncoW, 0.8*height - troncoH, troncoW, troncoH);
	fill(40, 140, 60); 
	circle(0.15*width, 0.8*height - troncoH - 0.3*S, copaD + x_s*0.1);
	
	// Dibujo coche
	 fill(240, 200, 0);
	 rect(xC - 0.5*L, 0.75*height - 0.85*H, L, H, 0.1*L); 
	 fill(40); 
	 circle(xC - 0.35*L, 0.75*height + 0.55*H, wheelD);
	 circle(xC + 0.35*L, 0.75*height + 0.55*H, wheelD);
	
    // Movimiento (sube si vyG > 0) 

    yG = yG - vyG;
    xC = xC + vxC;
    // Movimiento de astros y de sus cielos (cada uno con su estado)
    x_s  = x_s  + v_s;
    x_cs = x_cs + v_s;   // el cielo del sol se desplaza con el sol

    x_l  = x_l  + v_l;
    x_cl = x_cl + v_l;   // el cielo de la luna se desplaza con la luna
  }
  </script>
  </body>
</html>